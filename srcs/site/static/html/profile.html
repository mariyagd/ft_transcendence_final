<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="icon" href="../../media/images/logo.png" type="image/x-icon">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title data-translate="profile_page_title">Profile</title>
	<link rel="stylesheet" href="../css/styles.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body data-bs-theme="dark" class="more-marge-top-title min-vh-100 d-flex flex-column">
<!-- ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ -->
	<nav class="navbar navbar-expand-lg bg-light-subtle fixed-top">
		<div class="container-fluid">
			<a href="../index.html" class="navbar-brand">
				<img src="../../media/images/logo.png" alt="logo" width="50" height="50" class="d-inline-block align-text-top">
			</a>
			<div class="dropdown ms-auto" id="userMenu">
			</div>
		</div>
	</nav>
<!-- ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ -->
	<div class="container-fluid mt-5 mb-5">
		<h1 class="text-center mb-5" data-translate="profile_page_title">Profile</h1>
		<div id="messageContainer" class="mb-5"></div>
	</div>
<!-- ════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════ -->
    <div class="container-fluid div-custom-marge-pp">
        <div class="row">
<!-- ────────── Colonne pour la photo ────────── -->
			<div class="col-md-6 d-flex flex-column justify-content-center">
				<div class="profile-photo-wrapper">
					<img src="" alt="Profile Photo" id="profilePhoto" class="profile-photo">
					<div class="edit-overlay d-flex justify-content-center align-items-center">
						<span class="text-white fw-bold" data-translate="edit_profile_title">EDIT</span>
					</div>
				</div>
			</div>
<!-- ────────── Colonne pour les infos et changement mdp ────────── -->
			<div class="col-md-6 d-flex flex-column justify-content-center more-marge-top-title">
				<div class="text-start">
					<div class="row mb-2">
						<div class="col-md-4 col-12 fw-bold fs-5 text-nowrap" data-translate="username_label">Username :</div>
						<div class="col-md-8 col-12 fs-5 text-nowrap" id="userUsername"></div>
					</div>
					<div class="row mb-2">
						<div class="col-md-4 col-12 fw-bold fs-5 text-nowrap" data-translate="first_name_label">Prénom :</div>
						<div class="col-md-8 col-12 fs-5 text-nowrap" id="userFirstName"></div>
					</div>
					<div class="row mb-2">
						<div class="col-md-4 col-12 fw-bold fs-5 text-nowrap" data-translate="last_name_label">Nom :</div>
						<div class="col-md-8 col-12 fs-5 text-nowrap" id="userLastName"></div>
					</div>
					<div class="row mb-2">
						<div class="col-md-4 col-12 fw-bold fs-5 text-nowrap" data-translate="email_label">Email :</div>
						<div class="col-md-8 col-12 fs-5 text-nowrap" id="userEmail"></div>
					</div>
					<button class="btn btn-outline-primary mt-5" id="editProfileBtn" data-translate="edit_profile_button">Modifier le profil</button>
					<button class="btn btn-outline-warning mt-5" id="changePasswordBtn" data-translate="change_password_button">Changer le mot de passe</button>
				</div>				
			</div>
        </div>
    </div>
<!-- ════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════ -->
<div class="container-fluid div-custom-marge">
    <div class="row">
<!-- ────────── Colonne pour les amis ────────── -->
        <div class="col-md-6">
            <h3 class="mt-5">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#friendListContainer" role="button" aria-expanded="false" aria-controls="friendListContainer" data-translate="friend_list_title">
                    LISTE D'AMIS
                </a>
            </h3>
            <div id="friendListContainer" class="collapse text-start mt-5"></div>

            <h3 class="mt-5 d-flex align-items-center">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#allUsersContainer" role="button" aria-expanded="false" aria-controls="allUsersContainer" data-translate="all_players_title">
                    TOUS LES JOUEURS
                </a>
				<span id="newFriendRequestIndicator" class="blinking-dot d-none ms-2"></span>
            </h3>
            <div id="allUsersContainer" class="collapse text-start mt-5"></div>
        </div>

<!-- ────────── Colonne pour les stats et les tournois ────────── -->
        <div class="col-md-6">

            <h3 class="mt-5" data-translate="personal_stats_title">STATISTIQUES PERSONELLE</h3>
            <div class="card p-4 mb-4 mt-5" id="statsContainer">
                <p><strong data-translate="games_played_label">Nombre de parties jouées :</strong> <span id="totalPlayed"></span></p>
                <p><strong data-translate="win_percentage_label">Pourcentage de victoire :</strong> <span id="winPercentage"></span>%</p>
                <button class="btn btn-outline-info" type="button" data-bs-toggle="collapse" data-bs-target="#statsDetails" aria-expanded="false" aria-controls="statsDetails" data-translate="all_modes_button">
                    Tous les modes
                </button>
                <div class="collapse mt-3" id="statsDetails">
                    <table class="table table-bordered table-hover text-center">
                        <thead class="table-light">
                            <tr>
                                <th data-translate="game_mode">Mode</th>
                                <th data-translate="wins_label">Victoire</th>
                                <th data-translate="losses_label">Défaite</th>
                            </tr>
                        </thead>
                        <tbody id="modeStatsTable">
                            <!-- Les statistiques par mode seront insérées ici -->
                        </tbody>
                    </table>
                </div>
            </div>

            <h3 class="mt-5 d-flex align-items-center">
                <a class="text-decoration-none" data-bs-toggle="collapse" href="#matchHistoryContainer" role="button" aria-expanded="false" aria-controls="matchHistoryContainer" data-translate="match_history_title">
                    HISTORIQUE DES PARTIES
                </a>
            </h3>
            <div id="matchHistoryContainer" class="collapse text-start mt-5"></div>
        </div>

    </div>
</div>
<div class="mb-5 mt-5"></div>

<!-- ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ -->
<!-- ────────── Modal pour changement du mot de passe ────────── -->
	<div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="changePasswordModalLabel" data-translate="change_password_modal_title">Changer le mot de passe</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form id="changePasswordForm">
				<div class="mb-3">
					<label for="oldPassword" class="form-label" data-translate="old_password_label">Ancien mot de passe</label>
					<input type="password" class="form-control" id="oldPassword" required>
				</div>
				<div class="mb-3">
					<label for="newPassword" class="form-label" data-translate="new_password_label">Nouveau mot de passe</label>
					<input type="password" class="form-control" id="newPassword" required>
				</div>
				<div class="mb-3">
					<label for="confirmNewPassword" class="form-label" data-translate="confirm_new_password_label">Confirmer le nouveau mot de passe</label>
					<input type="password" class="form-control" id="confirmNewPassword" required>
				</div>
				<button type="submit" class="btn btn-primary" data-translate="save_changes_button">Changer</button>
				</form>
				<div id="passwordChangeMessage" class="mt-3"></div>
			</div>
			</div>
		</div>
	</div>
<!-- ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ -->
<!-- Modal pour afficher les détails de l'ami -->
	<div class="modal fade" id="friendDetailsModal" tabindex="-1" aria-labelledby="friendDetailsModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="friendDetailsModalLabel"><strong></strong></h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="text-center mb-4">
						<img id="friendProfilePhoto" class="rounded-circle" src="" alt="Profile Photo" width="150" height="150">
					</div>
					<div class="text-start">
						<p><strong data-translate="first_name_label">Prénom :</strong> <span id="friendFirstName"></span></p>
						<p><strong data-translate="last_name_label">Nom :</strong> <span id="friendLastName"></span></p>
						<p><strong data-translate="member_since_label">Membre depuis :</strong> <span id="friendDateJoined"></span></p>
						<p><strong data-translate="last_login_label">Dernière connexion :</strong> <span id="friendLastLogin"></span></p>
						<p><strong data-translate="friend_since_label">Ami depuis :</strong> <span id="friendSince"></span></p>
					</div>

					<div class="text-start mt-4">
						<h5><strong data-translate="statistics_title">STATISTIQUES</strong></h5>
						<p><strong data-translate="games_played_label">Nombre de parties jouées :</strong> <span id="friendTotalPlayed"></span></p>
						<p><strong data-translate="win_percentage_label">Pourcentage de victoire :</strong> <span id="friendWinPercentage"></span>%</p>
						<button class="btn btn-outline-info btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#friendStatsDetails" aria-expanded="false" aria-controls="friendStatsDetails" data-translate="all_modes_button">
							Tous les modes
						</button>
						<div class="collapse mt-3" id="friendStatsDetails">
							<table class="table table-bordered table-hover text-center">
								<thead class="table-light">
									<tr>
										<th data-translate="game_mode">Mode</th>
										<th data-translate="wins_label">Victoire</th>
										<th data-translate="losses_label">Défaite</th>
									</tr>
								</thead>
								<tbody id="friendModeStatsTable">
									<!-- Statistiques des modes pour l'ami -->
								</tbody>
							</table>
						</div>
					</div>

					<div class="mt-4">
						<h5 class="mt-3">
							<a class="text-decoration-none" data-bs-toggle="collapse" href="#friendMatchHistoryContainer" role="button" aria-expanded="false" aria-controls="friendMatchHistoryContainer" data-translate="match_history_title">
								Historique des Parties
							</a>
						</h5>
						<div id="friendMatchHistoryContainer" class="collapse mt-3"></div>
					</div>

				</div>
				<div class="modal-footer d-flex justify-content-between">
					<button type="button" class="btn btn-danger" id="removeFriendBtn" data-translate="remove_friend_button">Supprimer</button>
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-translate="close_button">Fermer</button>
				</div>
			</div>
		</div>
	</div>
<!-- ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ -->
<!-- Modal pour changer la photo de profil -->
<div class="modal fade" id="editProfilePhotoModal" tabindex="-1" aria-labelledby="editProfilePhotoModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="editProfilePhotoModalLabel" data-translate="edit_profile_photo_modal_title">Changer la photo de profil</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form id="profilePhotoForm">
					<div class="mb-3">
						<label for="newProfilePhoto" class="form-label" data-translate="new_profile_photo_label">Nouvelle photo de profil :</label>
                
						<!-- Input de type file masqué -->
						<input type="file" class="form-control d-none" id="newProfilePhoto" name="profile_photo" accept="image/*">
					
						<!-- Bouton personnalisé pour sélectionner le fichier -->
						<button type="button" id="selectPhotoButton" class="btn btn-secondary" data-translate="select_file_button">Choisir une photo</button>
					
						<!-- Div pour afficher le nom du fichier sélectionné -->
						<div id="fileNameDisplay" class="mt-2 text-muted"></div>
					</div>
					<button type="button" class="btn btn-danger" id="deletePhotoButton" data-translate="delete_photo_button">Supprimer la photo</button>
					<button type="submit" class="btn btn-primary float-end" data-translate="save_changes_button">Enregistrer</button>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ -->
<!-- Modale pour la modification des informations de profil -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editProfileModalLabel" data-translate="edit_profile_button">Modifier le profil</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editProfileForm">
                    <div class="mb-3">
                        <label for="editFirstName" class="form-label" data-translate="first_name_label">Prénom</label>
                        <input type="text" class="form-control" id="editFirstName" name="first_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="editLastName" class="form-label" data-translate="last_name_label">Nom</label>
                        <input type="text" class="form-control" id="editLastName" name="last_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="editUsername" class="form-label" data-translate="username_label">Nom d'utilisateur</label>
                        <input type="text" class="form-control" id="editUsername" name="username" maxlength="8" required>
                    </div>
                    <div class="mb-3">
                        <label for="editEmail" class="form-label" data-translate="email_label">E-mail</label>
                        <input type="email" class="form-control" id="editEmail" name="email" required>
                    </div>
                    <button type="submit" class="btn btn-primary" data-translate="save_changes_button">Enregistrer les modifications</button>
                </form>
            </div>
			<div id="profileEditMessage"></div>
        </div>
    </div>
</div>
<!-- ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ -->
	<script src="../js/commons/common.js"></script>
	<script src="../js/commons/userMenu.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script src="../js/profile.js"></script>
	<script src="../js/friends/friendList.js"></script>
	<script src="../js/friends/showAllUsers.js"></script>
	<script src="../js/games/currUserHistory.js"></script>
	<script src="../js/games/currUserStats.js"></script>
</body>
</html>
